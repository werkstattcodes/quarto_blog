{
  "hash": "aacec87400fcebbc2615e309a0724319",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"28th Austrian National Council: Prior Experiences as MPs.\"\ndescription: \"Who speaks for how long in the National Council of Austria's Parliament? And who respects the relevant time limits?\"\n\ndate: 10-23-2024\ndate-modified: last-modified\n\ncategories:\n  - Austria\n  - parliament\n  - r-bloggers\n\nreference-location: margin\nknitr:\n    opts_chunk:\n      code-fold: show\n      collapse: true\n      dev: \"ragg_png\"\ndraft: false  \n---\n\n\n\n# Just the results, please {.unnumbered}\n\n# Context\n\nThis week, marking the start of the 28th legislative period, Austria's new National Council will be inaugurated and its members sworn in. In terms of its composition, the chamber will reflect the result of the most recent general election in which the radical/populist Freedom Party (FPÖ) came out victorious. The FPÖ not only celebrated the strongest result in the party's history, it also became the largest party in Parliament for the first time. With increasing its vote share by 12.7 percentage points to 28.8 %, its group in parliament grows by 26 to 57 MPs (out of 183). This is by all means quite a surge.\n\nWhile much has been said and written about the problematic nature of the FPÖ and its worldview - and rightly so IMHO -, I would like to focus on the latter aspect here. What struck me was the vast influx of new MPs into the FPÖ's parliamentary group and parliament in general. Being a party politician is one thing, but being an MP is a completely different animal and entails its own challenges, not least the need to be familiar with the ins and outs of the chamber's rules of procedure and other bureaucratic intricacies governing the legislative process. Furthermore, one can think of various soft norms which structure parliamentary interactions to which the new MPs may have yet to be introduced. And finally, on a mere personal level, it is likely to make a difference whether you seek to strike a compromise with an MP across the ile with who you have been already sitting in parliament for several years or with somebody completely new. Personal ties need time to develop.\n\nAll this made wonder how unprecedented the current influx of new MPs is in the history of the 2nd Republic (since 1945). More precisely, there are two things I will empirically look into: - How much prior experience as MPs do the members of the new Parliament have and how does it compare to other legislative periods? - How large has been the share of new MPs without prior experience in the National Council at the start of other legislative periods?\n\nAs always, since this blog is in the first place a blog about data analytics in R, I will detail below the required steps. I will also make use of ParlAT, a package which I currently - as far as time permits - develop with the aim to make the analysis of data by Austria's parliament more accessible and easier to analyse. If you are not interested in these more technical side, just have a look at the embedded graphs which essentially summarise the results. Last but not least, iff you spot any errors, have questions etc. please do not hesitate to contact me via direct message on [bluesky](https://bsky.app/profile/zoowalk.bsky.social){target=\"_blank\"}, [mastadon](https://mastodon.social/@zoowalk){target=\"_blank\"} or, if really necessary, on [x](https://x.com/zoowalk){target=\"_blank\"}.\n\n# Load packages\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Load packages and define auxiliary functions\"}\nlibrary(tidyverse)\nlibrary(ParlAT)\nlibrary(furrr)\nplan(multisession, workers = 3)\nlibrary(ggdist)\nlibrary(ggtext)\nlibrary(ggforce)\nlibrary(ggrepel)\nlibrary(tictoc)\nlibrary(patchwork)\nlibrary(ggh4x)\n\nvec_background_color <- NULL\n\ntheme_post <- function() {\n  hrbrthemes::theme_ipsum_rc() %+replace%\n    theme(\n    #   plot.title = element_textbox_simple(size = rel(1.2), margin = ggplot2::margin(0, 0, .25, 0, unit = \"cm\"), family='Time'),\n      plot.title = element_textbox_simple(\n        size = rel(1.4), \n        margin = ggplot2::margin(0, 0, .25, 0, unit = \"cm\"), \n        family='Open Sans Condensed',\n        hjust = 0,\n        face=\"bold\"),\n      plot.subtitle = element_textbox_simple(\n        size = rel(.9), \n        color = \"grey30\", \n        face = \"plain\", \n        family='Roboto Condensed', \n        margin = ggplot2::margin(0, 0, b = 1, 0, unit = \"cm\")),\n      text=element_text(family=\"Roboto Condensed\"),\n      axis.title.x = element_blank(),\n      axis.title.y = element_blank(),\n      axis.text.y = element_text(size = rel(.8), hjust=1),\n      axis.text.x = element_text(size = rel(.8)),\n      panel.background = element_rect(fill = vec_background_color, color = NA),\n      plot.background = element_rect(fill = vec_background_color, color = NA),\n      panel.border = element_blank(),\n      plot.title.position = \"plot\",\n      plot.margin = ggplot2::margin(0, 0.25, 0, 0, \"cm\"),\n      legend.position = \"top\",\n      legend.margin = ggplot2::margin(l = 0, 0, 0, 0, \"cm\"),\n      legend.justification = \"left\",\n      legend.location = \"plot\",\n      legend.title = element_blank(),\n      plot.caption.position = \"plot\",\n      plot.caption = element_textbox_simple(\n        hjust = 0, \n        color = \"grey30\", \n        family=\"Roboto Condensed\",\n        face=\"plain\",\n        margin=ggplot2::margin(t=0.35, unit=\"cm\"),\n        size=rel(.8)\n        )  \n    )\n}\n\ntheme_set(theme_post())\n\nfn_label_unit <- function(x, label) {\n  x <- scales::number(x,big.mark=\".\", decimal.mark=\",\")\n  #x <- as.character(x)\n  index_last_label <- max(which(!is.na(x)))\n  x[index_last_label] <- paste(x[index_last_label], label)\n  return(x)\n}\n\nvec_party_colors <- c(\n  FPÖ = \"#005DA8\", NEOS = \"#EA5290\", ÖVP = \"#5DC2CC\", SPÖ = \"#FC0204\", GRÜNE = \"#A3C630\",\n  none = \"darkgrey\"\n)\n\n#define caption\ntxt_caption_graph <- \"Data: https:&#47;&#47;www.parlament.gv.at&#47;recherchieren&#47;open-data.  Analysis: Roland Schmidt | @zoowalk | <span style='font-weight:400'>https:&#47;&#47;werk.statt.codes</span>\"\n\n```\n:::\n\n\n\n# MPs' experience in the National Council\n\n## MPs at start of legislative period\n\nIn this section I want to get a measurement how much experienced are MPs when they get sworn in at the beginning of a legislative period. In other words, I would like to know, for how many days/years they have been already sitting as an MP in the National Council, prior to the new period. To do so we first have to get a dataframe which contains the MPs at the start of each legislative period. In a second step, I'll calculate their prior time as MPs.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Get start and end dates of ligislative periods\"}\ndf_legis_periods <- ParlAT::get_legis_period() %>%\nfilter(legis_period>=5) #only after 1945\n\nglimpse(df_legis_periods)\n## Rows: 24\n## Columns: 5\n## $ legis_period_rom     <chr> \"XXVIII\", \"XXVII\", \"XXVI\", \"XXV\", \"XXIV\", \"XXIII\"…\n## $ legis_period         <dbl> 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 1…\n## $ legis_period_current <lgl> TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, F…\n## $ date_start           <date> 2024-10-24, 2019-10-23, 2017-11-09, 2013-10-29, …\n## $ date_end             <date> NA, 2024-10-23, 2019-10-22, 2017-11-08, 2013-10-…\n```\n:::\n\n\n\nAs things stand for now, the API of the Austrian Parliament doesn't allow you to retrieve the composition of parliament for a specific date. It allows you to get all the MPs who where member of a specific legislative period, but the result includes also MPs who joined the Council at later stage in the legislative period.\n\nTo be able to obtain only the MPs present at the legislative periods' start, I make use of ParlAT's 'create_panel' function which creates a MP-date panel. To put it differently, it returns a row for every day of the specified legislative periods the composition of the National Council. Note this function can take quite a bit of time.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Get mps at start of legislative period\"}\ntic()\ndf_panel_nr <- ParlAT::create_panel(institution=\"Nationalrat\", legis_period=5:28)\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"V\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 177\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"VI\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 173\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"VII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 178\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"VIII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 180\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"IX\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 179\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"X\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 182\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XI\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 183\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 172\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XIII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 207\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XIV\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 203\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XV\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 220\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XVI\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 230\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XVII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 236\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XVIII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 241\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XIX\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 220\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XX\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 240\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXI\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 231\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 220\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXIII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 224\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXIV\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 229\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXV\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 218\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXVI\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 217\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXVII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 221\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"XXVIII\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 188\ntoc()\n## 529.41 sec elapsed\n```\n:::\n\n\n\n\n\n\n\nOverall, our MP-day panel features 5095444 rows. Before applying the filter in order to keep only the MPs at the start of the legislative period, there's one modification which is needed. As it turns out, there are some MPs who were MPs for only for single day. I am not sure what's the context to this, but as it turns out most of these cases actually relate to the first day of the 20th legislative period (15.1.1996). I remove them since according to the data a) they were replaced on the same day by other MPs and b) how much experience the MPs bring with them, going forward into the new legislative period.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Identify MPs who lasted only one single day\"}\ndf_panel_nr <- df_panel_nr %>%\ngroup_by(pad_intern, index_mandate) %>%\nmutate(n_days_mandate=difftime(max(mandate_date), min(mandate_date), unit=\"days\")+1) %>%\nungroup()\n\ndf_single_day_mandates <- df_panel_nr %>%\nfilter(n_days_mandate==1)\n\n#remove single day mandates\ndf_panel_nr_mod <- df_panel_nr %>%\nanti_join(., df_single_day_mandates, by=c(\"pad_intern\", \"index_mandate\"))\n\n```\n:::\n\n\n\nNow with the panel sanitized, let's keep only the the dates which are the starting dates of a new legislative period.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Keep only MPs at start of period\"}\ndf_panel_nr_start <- df_panel_nr_mod %>%\n#keep only start of legislative period\nsemi_join(., df_legis_periods, by=c(\"mandate_date\"=\"date_start\")) %>%\n#legis_period information\nleft_join(., df_legis_periods %>% select(-date_end), by=c(\"mandate_date\"=\"date_start\"))\n\n#remove end day of mandate ending to avoid overlaps\ndf_panel_nr_start_corr <- df_panel_nr_start %>%\nfilter(mandate_date_type!=\"mandatBis\" | is.na(mandate_date_type)) \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Plot number of MPs/Size of National Council over time\"}\ndf_plot <- df_panel_nr_start_corr %>%\nmutate(year=lubridate::year(mandate_date)) %>%\nmutate(year=as.factor(year)) %>%\ncount(legis_period, year)\n\ndf_plot %>%\nggplot()+\nlabs(title=\"Anzahl an NR Abeordnenten/Größe des Nationalrates\",\ncaption=txt_caption_graph)+\ngeom_point(\n    aes(\n        x=as.factor(legis_period),\n        y=n)\n)+\ngeom_line(\n    aes(\n        x=as.factor(legis_period),\n        y=n,\n        group=1)\n)+\nscale_x_discrete(labels=\\(x) as.numeric(x) %>% as.roman(),\n  sec.axis = sec_axis(\n    transform=identity,\n  labels=paste0(\"'\",df_plot$year %>% str_extract(., regex(\"\\\\d{2}$\"))))\n)+\nscale_y_continuous(\n    limits=c(0, 200),\n    breaks=c(100, 165, 183),\n    minor_breaks=NULL\n    )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n## Get number of days in Parl at starting day\n\nAt this point we have a dataframe with the MPs at the start of each legislative period. Now, we want to know for how long each MP has been already *previously* sitting in the National Council, i.e. how many days/years of experience he or she already has. Note that I don't differentiate between party membership - e.g. if a current MP was previously sitting for a different party in the National Council, this (obviously) still counts as experience in the National Council.\n\nIn order to answer this question, I'll set up a function which extracts an MP's period(s) in the National Council and cuts the period off with the date of the start of the legislative period in question. This is because I am interested in the experience at the start of each legislative period. As you may note, nested in the function is the call to ParlAT's `get_mandates` which retrieves an MP's mandates and their durations.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Define function to get number of days in Parliament as of cut-off date\"}\nfn_get_days_in_parl <- function(pad_intern, cut_off_date) {\n\n#get start and end dates of all mandates of an MP\ndf_mandates <- ParlAT::get_mandates(pad_intern = pad_intern, institution=\"Nationalrat\")\n\ndf_mandate_days <- df_mandates %>%\n#if a legislative period is onging fill in the current date\nmutate(mandatBis=case_when(\n    aktiv==TRUE & is.na(mandatBis) ~ lubridate::today(),\n    .default=mandatBis\n)) %>%\ndistinct(pad_intern, mandat, wahlpartei, mandatVon, mandatBis) %>%\n#remove pre-WW2 mandates\nfilter(mandatVon >= as.Date(\"1945-12-19\")) %>%\n#only mandates which started before or at the cut_off_date\nfilter(mandatVon <= cut_off_date) %>%\n#replace the end date if it's later than the cut-off date = date of begining of legislative period\nmutate(mandatBis_mod=case_when(\n    mandatBis >= cut_off_date ~ cut_off_date,\n    .default=mandatBis\n)) %>%\n#calculate length of mandate in days\nmutate(\n    days_in_parl=difftime(mandatBis_mod, mandatVon, unit=\"days\")\n)\n\n#get sum of days per MP; pull numeric vector\ndf_mandate_days %>%\nsummarise(N_days_in_parl=sum(days_in_parl, na.rm=T)) %>%\npull(N_days_in_parl) %>% as.numeric()\n\n}\n```\n:::\n\n\n\nNote that, depending on your machine, this function also takes a bit of time.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Apply function\"}\ntic()\ndf_days_in_parl <- df_panel_nr_start_corr %>%\nmutate(days_in_parl=future_map2_int(pad_intern, mandate_date, \\(x,y) fn_get_days_in_parl(pad_intern=x, cut_off_date=y), .progress=TRUE))  %>%\nselect(\n    legis_period,\n    pad_intern, \n    name, \n    wahlpartei, \n    days_in_parl \n)\ntoc()\n## 371.07 sec elapsed\n\n\n#add starting year to legsilativ periods for better labeling\ndf_legis_start_year <- df_legis_periods %>%\nmutate(year_start=lubridate::year(date_start)) %>%\nselect(\n    legis_period_rom,\n    legis_period,\n    year_start\n)\n\ndf_days_in_parl <- df_days_in_parl %>%\nleft_join(., df_legis_start_year, by=\"legis_period\")\n```\n:::\n\n\n\n\n\nSince party abbreviations changed over time we have to standardize them.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Keep only current five parties and standardize party names\"}\n#standardize party names & filter to current parties\ndf_days_in_parl <- df_days_in_parl %>%\nmutate(wahlpartei_standard=case_when(\n    str_detect(wahlpartei, regex(\"NEOS\")) ~ \"NEOS\",\n    str_detect(wahlpartei, regex(\"^F$|FPÖ\")) ~ \"FPÖ\",\n    .default=wahlpartei))\n\n#show combinations  \ndf_days_in_parl %>%\ndistinct(wahlpartei, wahlpartei_standard)    \n## # A tibble: 17 × 2\n##    wahlpartei wahlpartei_standard\n##    <chr>      <chr>              \n##  1 ÖVP        ÖVP                \n##  2 SPÖ        SPÖ                \n##  3 FPÖ        FPÖ                \n##  4 NEOS       NEOS               \n##  5 NEOS-LIF   NEOS               \n##  6 WdU        WdU                \n##  7 F          FPÖ                \n##  8 GRÜNE      GRÜNE              \n##  9 L          L                  \n## 10 BZÖ        BZÖ                \n## 11 LB         LB                 \n## 12 PILZ       PILZ               \n## 13 VO         VO                 \n## 14 KPÖ        KPÖ                \n## 15 KuL        KuL                \n## 16 STRONACH   STRONACH           \n## 17 OK         OK\n```\n:::\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Check for missing data\"}\nvisdat::vis_miss(df_days_in_parl)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n\nThere are no missing data.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Check for duplicates\"}\ndf_dupes <- janitor::get_dupes(df_days_in_parl, pad_intern, legis_period)\ndf_dupes\n## # A data frame: 0 × 9\n## # ℹ 9 variables: pad_intern <chr>, legis_period <dbl>, dupe_count <int>,\n## #   name <chr>, wahlpartei <chr>, days_in_parl <int>, legis_period_rom <chr>,\n## #   year_start <dbl>, wahlpartei_standard <chr>\n```\n:::\n\n\n\nThere are 0 duplicates when checking for combinations of MP's ID and legislative period.\n\n## Visualize result\n\nBy now we have the data we are interested in. Now, it's about finding the appropriate way to convey its meaning. It seems to me there are three ways to look at it:\n\n-   aggregated by party and legislative period\n-   average experience by MP per party and legislative period\n-   on an individual level, per legislative period\n\n## Aggregated MP experience by party\n\nBelow two graphs. The first one is a line graph depicting the development for each of the parties which are currently in parliament (other parties are not shown individually but included into the category \"Alle\"). The position on the y-axis indicates the number of total years which the MPs have already previously spent as MPs in the National Chamber.\n\nA few things stood out to me:\n\n-   On a general level, MPs' peak in aggregate prior MP-years has been in the 1970s. I haven't really thought it through, but I assume there's been at least partly some legacy effect of the increase from 165 to 183 MPs with the start of the 13th legislative period.\n\n-   The 27th legislative period was the period in which MPs featured in total the lowest number of previous years in the National Chamber. I.e., it was the National Council with the least prior experience at the start of a new legislative period.\n\n-   At the start of the current, 28th legislative period, the FPÖ features for the first time more prior experience in the chamber than the SPÖ. For the SPÖ it's the lowest number since the start of the 2nd Republic. Considering its sweeping electoral success now, the FPÖ will most likely overtake the ÖVP by the end of this period.\n\n### Line graph\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Get summary stats per party and legisltive period\"}\ndf_res_party <- df_days_in_parl %>%\ngroup_by(legis_period, wahlpartei_standard, year_start) %>%\nsummarise(\n    mps_n=n(),\n    sum_days_in_parl=sum(days_in_parl, na.rm=T),\n    median_days_in_parl=median(days_in_parl, na.rm=T),\n    mean_days_in_parl=mean(days_in_parl, na.rm=T),\n    sd_days_in_parl=sd(days_in_parl, na.rm=T),\n    \n) %>%\nungroup() %>%\nmutate(across(\n    matches(\"_days\"),  # Select columns containing \"_days\"\n    list(years = ~./365),  # Create new columns by dividing by 365\n    .names = \"{str_replace(.col, '_days','_years')}\"  # Naming pattern for new columns\n  )\n) %>%\nmutate(year_start_short=str_extract(year_start, regex(\"\\\\d{2}$\")) %>% paste0(\"'\",.)) %>%\nmutate(year_start_short=str_replace_all(year_start_short, c(\"'02\"=\"2002\", \"'45\"=\"1945\"))) %>%\n# mutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))}\\n({year_start_short})\")) %>%\nmutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))}<br><span style='font-size:6pt;'>({year_start_short})</span>\")) %>%\narrange(legis_period) %>%\nmutate(legis_period_label=fct_inorder(legis_period_label))\n\ndf_res_all <- df_days_in_parl %>%\ngroup_by(legis_period, year_start) %>%\nsummarise(\n    mps_n=n(),\n    sum_days_in_parl=sum(days_in_parl, na.rm=T),\n    median_days_in_parl=median(days_in_parl, na.rm=T),\n    mean_days_in_parl=mean(days_in_parl, na.rm=T),\n    sd_days_in_parl=sd(days_in_parl, na.rm=T)\n) %>%\nungroup() %>%\nmutate(across(\n    matches(\"_days\"),  # Select columns containing \"_days\"\n    list(years = ~./365),  # Create new columns by dividing by 365\n    .names = \"{str_replace(.col, '_days','_years')}\"  # Naming pattern for new columns\n  )\n) %>%\nmutate(year_start_short=str_extract(year_start, regex(\"\\\\d{2}$\")) %>% paste0(\"'\",.)) %>%\nmutate(year_start_short=str_replace_all(year_start_short, c(\"'02\"=\"2002\", \"'45\"=\"1945\"))) %>%\n# mutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))}\\n({year_start_short})\")) %>%\nmutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))}<br><span style='font-size:6pt;'>({year_start_short})</span>\")) %>%\narrange(legis_period) %>%\nmutate(legis_period_label=fct_inorder(legis_period_label)) %>%\nmutate(wahlpartei_standard=\"Alle\")\n\nvec_party_colors <- c(vec_party_colors, \"Alle\"=\"black\")\n\ndf_comb <- bind_rows(\n    df_res_all , \n    df_res_party %>% \n    filter(wahlpartei_standard %in% c(\"NEOS\", \"FPÖ\", \"SPÖ\", \"ÖVP\", \"GRÜNE\"))\n    ) %>%\n    mutate(legend_label_y_right_color=vec_party_colors[wahlpartei_standard]) %>%\n    mutate(legend_label_y_right=glue::glue(\"<span style='color:{legend_label_y_right_color}'>{wahlpartei_standard}: {sum_years_in_parl %>% scales::number(accuracy=1, big.mark='.', \n    decimal.mark=',')} Jahre</span>\")) \n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Plot\"}\ntxt_subtitle <- \"Die Graphik zeigt an wieviel Abgeordneten-Jahre Parteien zum Beginn einer Legislaturperiode bereits mitbringen. Abgeordneten-Jahre sind Jahre, die eine/r Abgeordnete/r in früheren Legislaturperioden bereits im Nationalrat gesessen ist und somit als Erfahrung mitbringt. Die y-Achse zeigt die Summme dieser Jahre für jede Partei an. **Mit dem Beginn der 28. Legislaturperiode verfügt der FPÖ-Fraktion erstmals über mehr Abgeordnetenjahre als die SPÖ.** Zu keinem anderen Legislaturperiodenbeginn hatten die Abgeordneten des Nationalrates in Summe so wenig Abgeordneten-Erfahrung wie zu Beginn der vergangenen 27. Legislaturperiode.\"\n\ndf_res_party_interest <- df_res_party %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) \n\npl_comb <- df_comb %>% \nggplot()+\nlabs(\n    title=\"Summe der Abgeordneten-Jahre pro Partei zu Beginn einer Legislaturperiode\",\n    subtitle=txt_subtitle,\n    y=\"Summe der bisherigen Jahren als NR-Abg. ('Erfahrung')\",\n    # x=\"Legislatureperiode (Startjahr)\",\n    caption=txt_caption_graph\n)+\ngeom_line(aes(\n    x=as.factor(legis_period_label),\n    y=sum_years_in_parl,\n    color=wahlpartei_standard,\n    group=wahlpartei_standard)\n)+\ngeom_point(aes(\n    x=as.factor(legis_period_label),\n    y=sum_years_in_parl,\n    color=wahlpartei_standard)\n)+\n# ggrepel::geom_label_repel(\n#     data=. %>% filter(legis_period==28),\n#     aes(\n#         x=as.factor(legis_period_label),\n#         y=sum_years_in_parl ,\n#         label= glue::glue(\"{wahlpartei_standard}: {scales::number(sum_years_in_parl,accuracy=.1, big.mark='.', decimal.mark=',')} Jahre\"),\n#         color=wahlpartei_standard\n#     ),\n#     label.size = 0,\n#     fill=\"grey95\",\n#     xlim=c(28-3.5,NA),\n#     size=3,\n#     family=\"Roboto Condensed\"\n# )+\ngeom_vline(xintercept=9, color=\"black\", linetype=\"dotted\")+\ngeom_text(\n    x=8, \n    y=Inf, \n    label=\"<- 165 Abg\",\n    color=\"grey30\",\n    check_overlap=T,\n    hjust=1,\n    vjust=1,\n    size=3,\n    family=\"Roboto Condensed\"\n    )+\ngeom_text(\n    x=10, \n    y=Inf, \n    color=\"grey30\",\n    label=\"183 Abg ->\",\n    check_overlap=T,\n    hjust=0,\n    vjust=1,\n    size=3,\n    family=\"Roboto Condensed\"\n    )+\nscale_color_manual(values=vec_party_colors)+\nscale_x_discrete(\n    expand=expansion(mult=c(0.01,.01)),\n    guide = guide_axis(n.dodge=1)\n    )+\nscale_y_continuous(\n    labels=scales::number_format(big.mark = \".\", decimal.mark = \",\"),\n    expand=expansion(mult=c(0.01,.1)),\n    sec.axis = sec_axis(~., \n        breaks=df_comb %>% \n            filter(legis_period==28) %>% \n            mutate(sum_years_in_parl=case_when(\n                wahlpartei_standard==\"NEOS\" ~ sum_years_in_parl-50,\n                wahlpartei_standard==\"FPÖ\" ~ sum_years_in_parl-25,\n                .default= sum_years_in_parl)) %>%\n            pull(sum_years_in_parl),\n        labels=df_comb %>% filter(legis_period==28) %>% pull(legend_label_y_right))\n    )+\ntheme(\n    panel.background=element_rect(fill=vec_background_color),\n    plot.background=element_rect(fill=vec_background_color),\n    legend.position=\"none\",\n    # plot.title=element_text(family=\"Open Sans Condensed\", face=\"bold\"),\n    plot.caption.position=\"plot\",\n    plot.subtitle = element_textbox_simple(\n      margin = ggplot2::margin(t=0, l=0, b=.4, r=0, unit=\"cm\")),\n    axis.title.y=element_text(hjust=1, angle=90, color=\"grey30\"),\n    axis.text.x=element_markdown(size=rel(.6)),\n    axis.text.y=element_markdown()\n    )\npl_comb    \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n\n### Bargraph\n\nThe second graph is a bar graph which depicts the distribution of aggregated prior MP-years/experience in the National Chamber between the parties for each legislative period. In other words, of the total prior MP-years, how much does each party contribute. How 'experienced' are the different parties vice-versa at a specific point in time?\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Distribution of legislative experience between parties\"}\ndf_res_party <- df_res_party %>%\nmutate(wahlpartei_standard_other=fct_other(wahlpartei_standard, keep=c(\"ÖVP\", \"SPÖ\", \"FPÖ\", \"GRÜNE\", \"NEOS\"))) %>%\nmutate(wahlpartei_standard_other=forcats::fct_infreq(wahlpartei_standard_other) %>% fct_rev) %>%\nmutate(wahlpartei_standard_other=forcats::fct_relevel(wahlpartei_standard_other, \"Other\"))\n\ndf_res_party_share <- df_res_party %>%\ngroup_by(legis_period, legis_period_label, year_start, wahlpartei_standard_other) %>%\nsummarise(\n    sum_years_in_parl=sum(sum_years_in_parl)    \n) %>%\ngroup_by(legis_period, legis_period_label, year_start) %>%\nmutate(\n    share_years_in_parl=sum_years_in_parl/sum(sum_years_in_parl)\n) %>%\nungroup() %>%\n# mutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))} <i>({year_start})</i>\")) %>%\nmutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))} ({year_start})\")) %>%\narrange(desc(legis_period)) %>%\nmutate(legis_period_label=fct_inorder(legis_period_label) %>% fct_rev)\n\n# #annotated max share for each party\n# df_label_max <- df_res_party_share %>%\n# slice_max(order_by=share_years_in_parl, n=1, by=wahlpartei_standard_other) \n\n# #annotate min share for each party\n# df_label_min <- df_res_party_share %>%\n# slice_min(order_by=share_years_in_parl, n=1, by=wahlpartei_standard_other)\n\n#factor levels of parties for sorting facets\nlvls_party <- c(\"Other\", \"SPÖ\", \"FPÖ\", \"GRÜNE\", \"NEOS\", \"ÖVP\")\n\n#calculate y position of labels\ndf_label <- df_res_party_share %>%\n# mutate(wahlpartei_standard_other=forcats::fct_reorder(wahlpartei_standard_other, levels = lvls_party)) %>%\nmutate(wahlpartei_standard_other=forcats::fct_rev(wahlpartei_standard_other)) %>%\ngroup_by(legis_period, legis_period_label) %>%\narrange(wahlpartei_standard_other, .by_group = TRUE) %>%\ngroup_by(legis_period) %>%\nmutate(pos_y=cumsum(share_years_in_parl)-share_years_in_parl/2) %>%\nungroup()\n\n#annotate largest share\ndf_label_max <- df_label %>%\nfilter(share_years_in_parl>0) %>%\nslice_max(order_by=share_years_in_parl, n=1, by=wahlpartei_standard_other) \n\n#annotate for each party the smallest share other than 0\ndf_label_min <- df_label %>%\nfilter(share_years_in_parl>0) %>%\nslice_min(order_by=share_years_in_parl, n=1, by=wahlpartei_standard_other)\n\n#annotate all elements of the 28th legislative period start\ndf_label_28 <- df_label %>%\nfilter(legis_period==28)\n\n#combine labels\ndf_label_comb  <-  bind_rows(df_label_28, df_label_min, df_label_max) %>%\nmutate(segment_color=case_when(\n    wahlpartei_standard_other==\"FPÖ\" ~ \"white\",\n    .default=\"black\"))\n\n#labels sec axis\nvec_label_sec_axis <- df_res_party_share %>%\nfilter(legis_period>5) %>%\ngroup_by(legis_period) %>%\nsummarise(total_years_in_parl=sum(sum_years_in_parl, na.rm=TRUE)) %>%\nungroup() %>%\narrange(legis_period) %>%\npull(total_years_in_parl) %>%\nscales::number(accuracy=.1, big.mark='.', decimal.mark=',')\n\ntxt_subtitle <- \"Die Graphik zeigt die Verteilung der aggregtierten Abgeordnenten-Jahre zwischen den Parteien zu Beginn der jeweiligen Legislaturperiode an. Abgeordneten-Jahre sind Jahre, die Abgeordente bereits zuvor im Nationalrat gesessen haben und als Erfahrung in die beginnende Legislaturperiode mitbringen. Segment-Labels zeigen die aktuellen sowie höchsten und niedrigsten Werte für jede Partei an. Die SPÖ beginnt die 28. Legislaturperiode mit ihrem historisch niedrigsten Anteil an aggregierten Abgeordneten-Jahren.\"\n\npl_res_party_share <- df_res_party_share %>%\nfilter(legis_period>5) %>%\nggplot()+\nlabs(\n    title=\"Verteilung der Abgeordneten-Jahre pro Legislaturperiode\",\n    x=\"Verteilung der Abgeordneten-Jahre zwischen Parteien je Legislaturperiode\",\n    subtitle=txt_subtitle,\n    caption=txt_caption_graph\n)+\ngeom_bar(\n    aes(\n        y=legis_period_label,\n        x=share_years_in_parl,\n        fill=wahlpartei_standard_other#,\n        # group=wahlpartei_standard_other\n    ),\n    stat=\"identity\",\n    position=\"stack\",\n    orientation=\"y\"\n)+\ngeom_text(\n    data=df_label_comb %>% \n    filter(wahlpartei_standard_other!=\"Other\"),\n    aes(\n        y=as.factor(legis_period_label),\n        x=pos_y,\n        label=share_years_in_parl %>% scales::percent(accuracy=.1),\n        color=segment_color), #make annoation color dependent on segment color (white font/dark background)\n    stat=\"identity\",\n    size=3,\n    check_overlap=TRUE\n)+\nscale_fill_manual(values=vec_party_colors)+\nscale_x_continuous(\n    labels=scales::label_percent(accuracy = 1),\n    expand=expansion(mult=c(0,0.001)),\n    breaks=c(0, .25, .5, .75, 1),\n    minor_breaks=NULL,\n    position=\"top\"\n    )+\nscale_y_discrete(\n    sec.axis=dup_axis(\n        name=\"Summe Abg.-Jahre zu Beginn der Legislaturperiode\",\n        labels=vec_label_sec_axis\n        ),\n    expand=expansion(mult=c(0,0))\n)+\nscale_color_identity()+\ntheme(\n    axis.title=element_text(size=rel(.8), color=\"grey30\"),\n    axis.title.x=element_text(\n        color=\"grey30\", \n        margin=ggplot2::margin(0,0,0,0,\"cm\"),\n        hjust=0),\n    axis.text.x.top=element_markdown(\n        hjust=c(0,.5,.5,.5,1),\n        margin=ggplot2::margin(0.1,0,0,0,\"cm\")\n        ),\n    axis.title.y.right=element_text(\n        hjust=1, \n        color=\"grey30\", ),\n    axis.text.y=element_markdown(),\n    axis.text.y.right=element_markdown(\n        hjust=1, \n        color=\"grey30\",\n        margin=ggplot2::margin(0,0.1,0,0.1,\"cm\")\n        ),  \n    panel.grid.major.y=element_blank(),\n    panel.grid.minor.x=element_blank(),\n    panel.grid.minor.y=element_blank(),\n    legend.position=\"none\",\n    plot.background=element_rect(fill=vec_background_color),\n    panel.background=element_rect(fill=vec_background_color),\n    plot.title.position = \"plot\",\n    plot.subtitle = element_textbox_simple(\n        margin = ggplot2::margin(t=0, l=0, b=.3, r=0, unit=\"cm\")),\n    plot.margin = ggplot2::margin(r = 0.25, 0, 0, 0, \"cm\")\n    )\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\npl_res_party_share\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n\n## Average MP experience by party\n\nIn the previous section we looked at parties' aggregate number of their MPs'previous years in the National Council. To get a more nuanced view, let's now look at the average MP experience by party.\n\n### beeswarm\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_days_in_parl %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\nggplot()+\ngeom_jitter(\n    aes(\n        x=as.factor(legis_period), \n        y=days_in_parl/365\n        )\n)+\nfacet_wrap(vars(wahlpartei_standard))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\nmean median and SD\n\n# concentration of experience within a party\n\ngini\n\n### statpoint_interval\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Average MP-years per party\"}\n#update of package needed; incompatibility with dev version of ggplot?\n\nlvls_party <- c(\"FPÖ\", \"ÖVP\", \"SPÖ\", \"NEOS\", \"GRÜNE\")\n\ndf_pl_mp_average <- df_days_in_parl %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\"))  %>%\nmutate(wahlpartei_standard=factor(wahlpartei_standard, levels=lvls_party)) |> \n  group_by(legis_period, wahlpartei_standard) |> \n  mutate(n_obs=n()) |> \n  ungroup()\n\npl_mp_average <- df_pl_mp_average %>%\n#filter(legis_period>20)\nggplot()+\nstat_pointinterval(\n    aes(\n        x=as.factor(legis_period), \n        y=days_in_parl/365,\n        color=wahlpartei_standard#,\n        #size=n_obs\n        ),\n)+\nscale_color_manual(values=vec_party_colors)+\nfacet_wrap(vars(wahlpartei_standard))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\npl_mp_average\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n\n# gini\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nlibrary(ineq)\n\ndf_gini <- df_days_in_parl |> \n  group_by(legis_period, wahlpartei_standard) |> \n  summarise(gini=ineq::Gini(days_in_parl)) |> \n  ungroup()\n\ndf_gini |> \n  filter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\"))  %>%\n  filter(legis_period==28) |> \n  ggplot()+\n  geom_point(aes(x=wahlpartei_standard, y=gini, color=wahlpartei_standard))+\n  scale_color_manual(values=vec_party_colors)+\n  scale_y_continuous(limits=c(0,1))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n\n\n# median - geom_point/geom_line\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_days_in_parl %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\ngroup_by(wahlpartei_standard, legis_period) %>%\nsummarise(median_days_in_parl=median(days_in_parl, na.rm=T)) %>%\nungroup() %>%\nggplot()+\ngeom_point(\n    aes(\n        x=as.factor(legis_period), \n        y=median_days_in_parl, \n        color=wahlpartei_standard)\n)+\ngeom_line(\n    aes(x=as.factor(legis_period), \n    y=median_days_in_parl, \n    group=wahlpartei_standard,\n    color=wahlpartei_standard)\n)+\nscale_color_manual(values=vec_party_colors)+\nfacet_wrap(vars(wahlpartei_standard))+\ntheme(\n    plot.background=element_rect(fill=vec_background_color),\n    panel.background=element_rect(fill=vec_background_color)\n)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n\n# mean - geom_point/geom_line\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_days_in_parl %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\ngroup_by(wahlpartei_standard, legis_period) %>%\nsummarise(mean_days_in_parl=mean(days_in_parl, na.rm=T)) %>%\nungroup() %>%\nggplot()+\ngeom_point(\n    aes(x=as.factor(legis_period), y=mean_days_in_parl, color=wahlpartei_standard)\n)+\ngeom_line(\n    aes(x=as.factor(legis_period), y=mean_days_in_parl, \n    group=wahlpartei_standard,\n    color=wahlpartei_standard)\n)+\nscale_color_manual(values=vec_party_colors)+\nfacet_wrap(~wahlpartei_standard, ncol=1)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n\n## Individual MPs\n\n# 28 legis period\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_labels <- df_days_in_parl %>%\nfilter(legis_period==28) %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\nslice_max(order_by=days_in_parl, n=1, by=wahlpartei_standard, ) \n\ndf_days_in_parl %>%\nfilter(legis_period==28) %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\nmutate(wahlpartei_standard=factor(wahlpartei_standard, levels=lvls_party)) %>%\nggplot()+\nlabs(\n    title=\"Dauer der Zugerhörigkeit zum Nationalrat\",\n    x=\"Tage als Abgeordnete/r zum Nationalrat\",\n    caption=txt_caption_graph\n)+\ngeom_boxplot(\n    aes(x=days_in_parl, y=wahlpartei_standard),\n    color=\"grey90\",\n    alpha=.01,\n    outliers=FALSE\n)+\nggbeeswarm::geom_quasirandom(\n    aes(\n        x=days_in_parl, \n        y=wahlpartei_standard, \n        color=wahlpartei_standard\n        ),\n)+\ngeom_text_repel(\n    data=df_labels\n    ,aes(\n    x=days_in_parl,\n    y=wahlpartei_standard,\n    label=name\n    ),\n    min.segment.length = 0\n)+\nscale_color_manual(values=vec_party_colors)+\nscale_x_continuous(labels=\\(x) fn_label_unit(x, label=\"Tage als NR Abg.\"))+\ntheme_post()+\ntheme(\n    panel.grid.major.y = element_blank(),\n    axis.text.x=element_text(hjust=0),\n    axis.text.y=element_blank(),\n    legend.position=\"none\",\n    strip.text=element_text(hjust=1)\n)+\nfacet_wrap(\n    vars(wahlpartei_standard), \n    ncol=1, \n    strip.position=\"left\",\n    scales=\"free_y\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n\n### table\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"\"}\ndf_experience <- df_days_in_parl %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\ngroup_by(wahlpartei_standard, legis_period) %>%\nsummarise(\n    median_days_in_parl=median(days_in_parl, na.rm=T),\n    mean_days_in_parl=mean(days_in_parl, na.rm=T),\n    sd_days_in_parl=sd(days_in_parl, na.rm=T)\n    )\n\ndf_experience    \n## # A tibble: 84 × 5\n## # Groups:   wahlpartei_standard [5]\n##    wahlpartei_standard legis_period median_days_in_parl mean_days_in_parl\n##    <chr>                      <dbl>               <dbl>             <dbl>\n##  1 FPÖ                            8               1178              1186 \n##  2 FPÖ                            9               1137              1137 \n##  3 FPÖ                           10               2588.             2463.\n##  4 FPÖ                           11                351              1325.\n##  5 FPÖ                           12               1462              2554.\n##  6 FPÖ                           13               1652.             1694.\n##  7 FPÖ                           14               3112.             3156.\n##  8 FPÖ                           15                  0              1372 \n##  9 FPÖ                           16               1444              2079.\n## 10 FPÖ                           17               1280              1287.\n## # ℹ 74 more rows\n## # ℹ 1 more variable: sd_days_in_parl <dbl>\n```\n:::\n\n\n\n# Share of Newcomers\n\nIn the following section, I am interested in each party's share of new MPs at the start of a new legislative period.\n\nHere, I take an MP as 'new' if she or he so far haven't had a mandate in any of the previous National Councils. So if an MP of the 28th legislative period, didn't have a mandate in the 27th, but e.g. in the 26th, I would still not consider it as a new MPs. The motivation behind this approach is my interest in how large the share of MPs without any previous (lower chamber) parliamentarian experience actually is. To get the numbers of interest, let's - get a data frame of all MPs since 1945 and the number of the legislative periods in which they served - and match this dataframe with the with composition of the National Council at the start of each legislative period.\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Get all MPs since 1945\"}\n#df of all MPs since 1945; the 5 legislative period\ndf_mps_5_end <- ParlAT::get_mps(legis_period = \"all\", institution=\"Nationalrat\") %>%\nunnest_longer(c(\"gesetzgebungsperioden\")) %>%\nmutate(gesetzgebungsperioden_num=as.roman(gesetzgebungsperioden) %>% as.numeric) %>%\nfilter(gesetzgebungsperioden_num>=5) %>%\nrename(legis_period=gesetzgebungsperioden_num)\n## >> {\"M\":[\"M\"],\"W\":[\"W\"],\"NRBR\":[\"NR\"],\"GP\":[\"ALLE\"],\"WP\":[\"ALLE\"],\"FR\":[\"ALLE\"],\"WK\":[\"ALLE\"]}\n## [1] 2035\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Import interim save\"}\ndf_mps_5_end <- nanoparquet::read_parquet(file=here::here(\"posts\", \"2024-10-24-mps-experience\", \"data_interim\", \"df_mps_5_end.parquet\"))\n```\n:::\n\n\n\n## bar graph share of new MPs\n\n\n\n::: {.cell .column-body-outset-right}\n\n```{.r .cell-code  code-fold=\"show\" code-summary=\"Match MPs at start of legislative period with mandates\"}\ndf_mps_legis <- df_days_in_parl %>%\n  mutate(year_start_short=str_extract(year_start, regex(\"\\\\d{2}$\")) %>% paste0(\"'\",.)) %>%\n  mutate(year_start_short=str_replace_all(year_start_short,c(\"'02\"=\"2002\", \"'45\"=\"1945\"))) %>%\n# mutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))}\\n({year_start_short})\")) %>%\nmutate(legis_period_label=glue::glue(\"{as.roman(as.numeric(legis_period))}<br><span style='font-size:6pt;'>({year_start_short})</span>\")) %>%\narrange(legis_period) %>%\nmutate(legis_period_label=fct_inorder(legis_period_label)) |> \nselect(\n    pad_intern,\n    legis_period,\n    legis_period_label,\n    name,\n    wahlpartei_standard,\n) \n\n#add start date of legislative period; from there derive end date of previous period\ndf_mps_legis <- df_mps_legis %>%\nleft_join(., df_legis_periods %>% select(legis_period, date_start), by=\"legis_period\") %>%\nmutate(date_end_previous=date_start-1)\n\n#check\n#nrow(df_mps_legis_x)==nrow(df_mps_legis)\n\n#use date_end_previous to match with all MPs at the end of the previous legislative period => reveals whether MP 'survived' elections\n#get MPs of last day of legis period from panel\ndf_mps_legis <- df_mps_legis %>%\nnest_join(., \n    df_panel_nr, \n    name=\"mp_remainer\",\n    by=join_by(pad_intern, date_end_previous==mandate_date))\n\ndf_mps_legis <- df_mps_legis %>%\nmutate(\n    mp_status_remainer_match=map_lgl(mp_remainer, \\(x) nrow(x)==1)\n)\n\n#check whether MP has been in any previous legislative period\ndf_mps_legis <- df_mps_legis %>%\nnest_join(., \n    df_mps_5_end,\n    name=\"mp_returnee\",\n    by=join_by(pad_intern, legis_period>legis_period)) %>%\nmutate(\n    mp_status_returnee_match=map_lgl(mp_returnee, \\(x) nrow(x)>0)\n) %>%\n#only a returnee if not already a remainer\nmutate(\n    mp_status_returnee_match=if_else(mp_status_remainer_match==TRUE, FALSE, mp_status_returnee_match)\n)\n\ndf_mps_legis <- df_mps_legis %>%\nmutate(\n    mp_status_novice=case_when(\n        mp_status_returnee_match==FALSE &\n        mp_status_remainer_match==FALSE ~ TRUE,\n        .default=FALSE        \n    )\n)\n\ndf_mps_legis <- df_mps_legis %>%\nmutate(mp_status=case_when(\n    mp_status_novice==TRUE ~ \"novice\",\n    mp_status_returnee_match==TRUE ~ \"returnee\",\n    mp_status_remainer_match==TRUE ~ \"remainer\",\n    .default=NA\n))\n\ndf_mps_legis %>%\nfilter(is.na(mp_status)) %>%\nnrow()\n## [1] 0\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ndf_all <- df_mps_legis %>%\ncount(legis_period, legis_period_label, mp_status) %>%\ngroup_by(legis_period, legis_period_label) %>%\nmutate(rel=n/sum(n)) %>%\nungroup() %>%\nmutate(wahlpartei_standard=\"ALLE\")\n\ndf_select <- df_mps_legis %>%\nfilter(wahlpartei_standard %in% c(\"GRÜNE\", \"ÖVP\", \"SPÖ\", \"FPÖ\", \"NEOS\")) %>%\ncount(legis_period, legis_period_label, mp_status, wahlpartei_standard) %>%\ngroup_by(legis_period, legis_period_label, wahlpartei_standard) %>%\nmutate(rel=n/sum(n)) %>%\nungroup()\n\ndf_comb <- bind_rows(df_all, df_select)\n\n#order factor levels for order of bar segments\nlvls_mp_status <- c(\"novice\", \"returnee\", \"remainer\")\ndf_comb <- df_comb |> \n  mutate(mp_status=forcats::fct(mp_status, levels=lvls_mp_status))\n\n#calculate y-position of segment labels\ndf_comb <- df_comb |> \n  group_by(legis_period, legis_period_label, wahlpartei_standard) |> \n  arrange(desc(mp_status), .by_group=TRUE) |> \n  mutate(rel_cumsum=cumsum(rel)) |> \n  mutate(label_pos=(rel/2)+lag(rel_cumsum, default=0)) |> \n  ungroup()\n\nvec_mp_status_colors <- c(\"novice\"=\"orange\", \"remainer\"=\"#152238\", \"returnee\"=\"darkred\")\n\n#Labels segments\n## add legis-period index per party; 1st period should not be labelled\ndf_comb <- df_comb |> \n  group_by(wahlpartei_standard) |> \n  arrange(legis_period, .by_group=TRUE) |> \n  mutate(\n    legis_period_first=min(legis_period)==legis_period\n  ) |> \n  ungroup()\n\n## latest\ndf_label_latest <- df_comb |> \n  filter(legis_period_first==FALSE) |> \n  slice_max(order_by=legis_period, by=wahlpartei_standard, n=1)\n## max\ndf_label_max <- df_comb |> \n  filter(legis_period_first==FALSE) |> \n  slice_max(order_by=rel, by=c(wahlpartei_standard, mp_status), n=1)\n## min\ndf_label_min <- df_comb |> \n  filter(legis_period_first==FALSE) |> \n  slice_min(order_by=rel, by=c(wahlpartei_standard, mp_status), n=1)\n\n#combine all\ndf_labels <- bind_rows(df_label_latest, df_label_max) |> \n  distinct()\n\n#Add color dependent on MP status/segment color\ndf_labels <- df_labels %>%\nmutate(\n    segment_label_color=case_when(\n        mp_status==\"novice\" ~ \"black\",\n        mp_status==\"remainer\" ~ \"white\",\n        mp_status==\"returnee\" ~ \"white\"\n    )\n)  \n\n#Add party total seats / legis period\ndf_comb <- df_comb |> \n  group_by(legis_period, wahlpartei_standard) |> \n  mutate(n_sum=sum(n), .after=\"n\") |> \n  ungroup()\n\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\ntxt_subtitle <- glue::glue(\"Die Graphik zeigt die relative Zusammensetzung der Parteien zu Beginn der Legislaturperioden nach vorhergender Erfahrung im Nationalrat an. **<span style='color:{vec_mp_status_colors['novice']}; font-weight:00'>'Newcomers'</span>** sitzen zum ersten mal im Nationalrat. **<span style='color:{vec_mp_status_colors['returnee']}'>'Returnees'</span>** waren bereits Abgeordnete jedoch nicht am Ende der vorhergehenden Legislaturperiode. **<span style='color:{vec_mp_status_colors['remainer']}'>'Remainers'</span>** waren am Ende der letzten Legislaturperiode bereits Mitglied. Segment-Labels zeigen die aktuellen sowie höchsten und niedrigsten Werte für jede Partei an. Die Kategorie 'Alle' enthalt sämtliche Partein, die in der 2. Republik im Parlament vertreten waren. Was den Anteil an Newcomern angeht so sind die Höchstwerte erst vor relativ kurzem erreicht worden.\")\n\npl_rel <- df_comb |> \n  ggplot()+\n  labs(\n    title=\"Newcomers, Returnees und Remainers: Zusammensetzung des Nationalrats nach vorhergehender NR-Erfahrung\",\n    subtitle=txt_subtitle,\n    y=\"Anteil nach NR-Erfahrung\",\n    caption=txt_caption_graph\n  )+\n  geom_bar(\n    aes(x=legis_period_label,\n        y=rel,\n        fill=mp_status),\n    stat=\"identity\")+\n  #segment labels\n  geom_text(\n    data=df_labels,\n    aes(\n      x=legis_period_label,\n      y=label_pos,\n      label=rel |> scales::percent(accuracy=1),\n      color=segment_label_color\n    ),\n    size=2.5,\n    fontface=\"bold\",\n    nudge_x =.25, #right allingmet distorts positioning\n    hjust=1\n  )+\n  geom_text(\n    aes(\n      x=legis_period_label,\n      y=1.1, #1=100 %\n      label=n_sum\n    ),\n    color=\"grey30\",\n    check_overlap = TRUE,\n    size=2.5\n  )+\n  scale_fill_manual(values=vec_mp_status_colors)+\n  scale_y_continuous(\n    position=\"right\",\n    breaks=c(0,.5,1),\n    label=scales::label_percent(accuracy = 1)\n    )+\n  scale_x_discrete(\n    expand=expansion(mult=c(0,0)),\n    sec.axis = dup_axis(name=\"Anzahl Mandate\", labels=NULL)\n  )+\n  scale_color_identity()+\n  facet_wrap2(\n    vars(wahlpartei_standard),\n    ncol=1,\n    scales=\"free_y\",\n    strip.position=\"left\")+\n  #define y-scale for each facet; show axis labels only for first facet\n  facetted_pos_scales(\n    y = list(\n       wahlpartei_standard==\"ALLE\" ~ scale_y_continuous(\n            position=\"right\",\n            breaks=c(0,.5,1),\n            label=scales::label_percent(accuracy = 1),\n            expand=expansion(mult=c(0,0.1))),\n       wahlpartei_standard!=\"ALLE\" ~ scale_y_continuous(\n         labels=NULL,\n         breaks=c(0,.5,1),\n         expand=expansion(mult=c(0,0.1))))\n  )+\n  theme(\n    panel.grid.major.x=element_blank(),\n    panel.grid.minor.x=element_blank(),\n    panel.grid.minor.y=element_blank(),\n    axis.title.x.top = element_text(\n        color=\"grey30\", \n        size=rel(0.8),\n        hjust=0,\n        margin=ggplot2::margin(b=0, unit=\"cm\")\n        ),\n    axis.text.x=element_markdown(size=rel(.6)),\n    axis.title.y.right=element_text(\n      size=rel(.8),\n      angle=270,\n      hjust=0.03,\n      color=\"grey30\"\n      ),\n    axis.text.y.right=element_text(,\n      vjust=c(0,.5,1),\n      size=rel(.8),\n      color=\"grey30\"),\n    panel.spacing.y=unit(0.25, \"cm\"),\n    legend.position=\"none\",\n    strip.text=element_text(\n      color=\"grey30\", \n      #vjust=1,\n      hjust=1,\n      size=rel(0.8))\n  )\n\nplot(pl_rel)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"show\"}\nknitr::knit_exit()\n```\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}